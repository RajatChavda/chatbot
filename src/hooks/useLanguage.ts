import { useState, useCallback } from 'react';

export interface Language {
  code: string;
  name: string;
  nativeName: string;
  flag: string;
}

export const SUPPORTED_LANGUAGES: Language[] = [
  { code: 'en', name: 'English', nativeName: 'English', flag: 'üá∫üá∏' },
  { code: 'es', name: 'Spanish', nativeName: 'Espa√±ol', flag: 'üá™üá∏' },
  { code: 'fr', name: 'French', nativeName: 'Fran√ßais', flag: 'üá´üá∑' },
  { code: 'de', name: 'German', nativeName: 'Deutsch', flag: 'üá©üá™' },
  { code: 'it', name: 'Italian', nativeName: 'Italiano', flag: 'üáÆüáπ' },
  { code: 'pt', name: 'Portuguese', nativeName: 'Portugu√™s', flag: 'üáµüáπ' },
  { code: 'ru', name: 'Russian', nativeName: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
  { code: 'ja', name: 'Japanese', nativeName: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
  { code: 'ko', name: 'Korean', nativeName: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
  { code: 'zh', name: 'Chinese', nativeName: '‰∏≠Êñá', flag: 'üá®üá≥' },
  { code: 'ar', name: 'Arabic', nativeName: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', flag: 'üá∏üá¶' },
  { code: 'hi', name: 'Hindi', nativeName: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä', flag: 'üáÆüá≥' },
  { code: 'nl', name: 'Dutch', nativeName: 'Nederlands', flag: 'üá≥üá±' },
  { code: 'sv', name: 'Swedish', nativeName: 'Svenska', flag: 'üá∏üá™' },
  { code: 'no', name: 'Norwegian', nativeName: 'Norsk', flag: 'üá≥üá¥' },
  { code: 'da', name: 'Danish', nativeName: 'Dansk', flag: 'üá©üá∞' },
  { code: 'fi', name: 'Finnish', nativeName: 'Suomi', flag: 'üá´üáÆ' },
  { code: 'pl', name: 'Polish', nativeName: 'Polski', flag: 'üáµüá±' },
  { code: 'tr', name: 'Turkish', nativeName: 'T√ºrk√ße', flag: 'üáπüá∑' },
  { code: 'th', name: 'Thai', nativeName: '‡πÑ‡∏ó‡∏¢', flag: 'üáπüá≠' }
];

const STORAGE_KEY = 'chatbot_language';

export const useLanguage = () => {
  const [currentLanguage, setCurrentLanguage] = useState<Language>(() => {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      try {
        const savedLang = JSON.parse(saved);
        return SUPPORTED_LANGUAGES.find(lang => lang.code === savedLang.code) || SUPPORTED_LANGUAGES[0];
      } catch {
        return SUPPORTED_LANGUAGES[0];
      }
    }
    return SUPPORTED_LANGUAGES[0];
  });

  const changeLanguage = useCallback((language: Language) => {
    setCurrentLanguage(language);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(language));
  }, []);

  const getTranslation = useCallback((key: string): string => {
    return translations[currentLanguage.code]?.[key] || translations.en[key] || key;
  }, [currentLanguage]);

  return {
    currentLanguage,
    changeLanguage,
    getTranslation,
    supportedLanguages: SUPPORTED_LANGUAGES
  };
};

// Translations object
const translations: Record<string, Record<string, string>> = {
  en: {
    // Header
    'ai_policy_assistant': 'AI Policy Assistant',
    'company_policy_assistant': 'AI-Powered Company Policy Assistant',
    'ai_ready': 'AI Ready',
    'configure_openai': 'Configure OpenAI',
    'documents_loaded': 'Documents Loaded',
    'upload_documents': 'Upload Documents',
    'hr_system': 'HR System',
    'online': 'Online',
    
    // Sidebar
    'new_chat': 'New Chat',
    'manage_documents': 'Manage Documents',
    'setup_openai': 'Setup OpenAI',
    'ai_configured': 'AI Configured',
    'recent_chats': 'Recent Chats',
    'settings': 'Settings',
    'no_chat_history': 'No chat history yet',
    'start_conversation': 'Start a new conversation',
    
    // Chat Input
    'configure_openai_first': 'Configure OpenAI first to enable AI responses...',
    'upload_documents_first': 'Upload documents, then ask about company policies...',
    'ask_about_policies': 'Ask about your company policies, benefits, procedures...',
    'configure_ai': 'Configure AI',
    'upload_docs': 'Upload Docs',
    'ai_ready_status': 'AI Ready',
    'ai_will_search': 'AI will search your documents and provide intelligent answers',
    'setup_required': 'Setup Required',
    'ready': 'Ready',
    
    // Welcome Message
    'welcome_message': "üëã Welcome! I'm your AI-powered company policy assistant. I can analyze your uploaded documents and provide intelligent, contextual answers about HR policies, benefits, procedures, and more. Upload your company documents and configure OpenAI to get started!",
    
    // Quick Actions
    'welcome_title': 'Welcome to Policy Assistant',
    'welcome_subtitle': 'Get instant answers to your company policy questions',
    'hr_policies': 'HR Policies',
    'leave_policy': 'Leave Policy',
    'code_of_conduct': 'Code of Conduct',
    'it_security': 'IT Security',
    'benefits': 'Benefits',
    'working_hours': 'Working Hours',
    
    // Document Manager
    'ai_document_manager': 'AI Document Manager',
    'advanced_pdf_processing': 'Advanced PDF processing with intelligent content extraction',
    'upload_company_documents': 'Upload Company Documents',
    'ai_will_extract': 'AI will extract and analyze content intelligently',
    'choose_pdf_files': 'Choose PDF Files',
    'files_to_process': 'Files to Process',
    'process_with_ai': 'Process with AI',
    'processing': 'Processing...',
    'processed_documents': 'Processed Documents',
    'no_documents_processed': 'No Documents Processed',
    'upload_pdf_files': 'Upload PDF files to get started',
    'clear_all': 'Clear All',
    'delete_document': 'Delete document',
    'select_document': 'Select a Document',
    'click_document_details': 'Click on a document to view its details and extracted sections',
    'extracted_sections': 'Extracted Sections',
    'pages': 'Pages',
    'words': 'Words',
    'file_size': 'File Size',
    'quality': 'Quality',
    'keywords': 'keywords',
    'documents': 'Documents',
    'pages_total': 'pages total',
    'sections_extracted': 'sections extracted',
    
    // OpenAI Config
    'configure_openai_title': 'Configure OpenAI',
    'openai_api_key_required': 'OpenAI API key required for AI responses',
    'openai_api_key': 'OpenAI API Key',
    'get_api_key': 'Get your API key from',
    'openai_platform': 'OpenAI Platform',
    'model': 'Model',
    'save_configuration': 'Save Configuration',
    'cancel': 'Cancel',
    'close': 'Close',
    
    // Language Selector
    'language': 'Language',
    'select_language': 'Select Language',
    'change_language': 'Change Language',
    
    // Common
    'today': 'Today',
    'yesterday': 'Yesterday',
    'days_ago': 'days ago',
    'excellent': 'excellent',
    'good': 'good',
    'fair': 'fair',
    'poor': 'poor',
    'delete_all': 'Delete All',
    'confirm_delete': 'This will permanently delete all documents. This action cannot be undone.',
    'error': 'Error',
    'success': 'Success',
    'loading': 'Loading...',
    'search': 'Search',
    'send': 'Send'
  },
  
  es: {
    // Header
    'ai_policy_assistant': 'Asistente de Pol√≠ticas IA',
    'company_policy_assistant': 'Asistente de Pol√≠ticas Empresariales con IA',
    'ai_ready': 'IA Listo',
    'configure_openai': 'Configurar OpenAI',
    'documents_loaded': 'Documentos Cargados',
    'upload_documents': 'Subir Documentos',
    'hr_system': 'Sistema RRHH',
    'online': 'En l√≠nea',
    
    // Sidebar
    'new_chat': 'Nuevo Chat',
    'manage_documents': 'Gestionar Documentos',
    'setup_openai': 'Configurar OpenAI',
    'ai_configured': 'IA Configurada',
    'recent_chats': 'Chats Recientes',
    'settings': 'Configuraci√≥n',
    'no_chat_history': 'A√∫n no hay historial de chat',
    'start_conversation': 'Iniciar una nueva conversaci√≥n',
    
    // Chat Input
    'configure_openai_first': 'Configure OpenAI primero para habilitar respuestas de IA...',
    'upload_documents_first': 'Suba documentos, luego pregunte sobre pol√≠ticas de la empresa...',
    'ask_about_policies': 'Pregunte sobre las pol√≠ticas, beneficios, procedimientos de su empresa...',
    'configure_ai': 'Configurar IA',
    'upload_docs': 'Subir Docs',
    'ai_ready_status': 'IA Listo',
    'ai_will_search': 'La IA buscar√° en sus documentos y proporcionar√° respuestas inteligentes',
    'setup_required': 'Configuraci√≥n Requerida',
    'ready': 'Listo',
    
    // Welcome Message
    'welcome_message': "üëã ¬°Bienvenido! Soy su asistente de pol√≠ticas empresariales con IA. Puedo analizar sus documentos cargados y proporcionar respuestas inteligentes y contextuales sobre pol√≠ticas de RRHH, beneficios, procedimientos y m√°s. ¬°Suba sus documentos empresariales y configure OpenAI para comenzar!",
    
    // Quick Actions
    'welcome_title': 'Bienvenido al Asistente de Pol√≠ticas',
    'welcome_subtitle': 'Obtenga respuestas instant√°neas a sus preguntas sobre pol√≠ticas empresariales',
    'hr_policies': 'Pol√≠ticas RRHH',
    'leave_policy': 'Pol√≠tica de Permisos',
    'code_of_conduct': 'C√≥digo de Conducta',
    'it_security': 'Seguridad TI',
    'benefits': 'Beneficios',
    'working_hours': 'Horario Laboral'
  },
  
  fr: {
    // Header
    'ai_policy_assistant': 'Assistant Politique IA',
    'company_policy_assistant': 'Assistant de Politique d\'Entreprise IA',
    'ai_ready': 'IA Pr√™t',
    'configure_openai': 'Configurer OpenAI',
    'documents_loaded': 'Documents Charg√©s',
    'upload_documents': 'T√©l√©charger Documents',
    'hr_system': 'Syst√®me RH',
    'online': 'En ligne',
    
    // Sidebar
    'new_chat': 'Nouveau Chat',
    'manage_documents': 'G√©rer Documents',
    'setup_openai': 'Configurer OpenAI',
    'ai_configured': 'IA Configur√©e',
    'recent_chats': 'Chats R√©cents',
    'settings': 'Param√®tres',
    'no_chat_history': 'Pas encore d\'historique de chat',
    'start_conversation': 'Commencer une nouvelle conversation',
    
    // Chat Input
    'configure_openai_first': 'Configurez OpenAI d\'abord pour activer les r√©ponses IA...',
    'upload_documents_first': 'T√©l√©chargez des documents, puis posez des questions sur les politiques d\'entreprise...',
    'ask_about_policies': 'Posez des questions sur les politiques, avantages, proc√©dures de votre entreprise...',
    'configure_ai': 'Configurer IA',
    'upload_docs': 'T√©l√©charger Docs',
    'ai_ready_status': 'IA Pr√™t',
    'ai_will_search': 'L\'IA recherchera dans vos documents et fournira des r√©ponses intelligentes',
    'setup_required': 'Configuration Requise',
    'ready': 'Pr√™t',
    
    // Welcome Message
    'welcome_message': "üëã Bienvenue ! Je suis votre assistant de politique d'entreprise aliment√© par l'IA. Je peux analyser vos documents t√©l√©charg√©s et fournir des r√©ponses intelligentes et contextuelles sur les politiques RH, les avantages, les proc√©dures et plus encore. T√©l√©chargez vos documents d'entreprise et configurez OpenAI pour commencer !",
    
    // Quick Actions
    'welcome_title': 'Bienvenue dans l\'Assistant Politique',
    'welcome_subtitle': 'Obtenez des r√©ponses instantan√©es √† vos questions sur les politiques d\'entreprise',
    'hr_policies': 'Politiques RH',
    'leave_policy': 'Politique de Cong√©',
    'code_of_conduct': 'Code de Conduite',
    'it_security': 'S√©curit√© IT',
    'benefits': 'Avantages',
    'working_hours': 'Heures de Travail'
  },
  
  de: {
    // Header
    'ai_policy_assistant': 'KI-Richtlinien-Assistent',
    'company_policy_assistant': 'KI-gest√ºtzter Unternehmensrichtlinien-Assistent',
    'ai_ready': 'KI Bereit',
    'configure_openai': 'OpenAI Konfigurieren',
    'documents_loaded': 'Dokumente Geladen',
    'upload_documents': 'Dokumente Hochladen',
    'hr_system': 'HR-System',
    'online': 'Online',
    
    // Sidebar
    'new_chat': 'Neuer Chat',
    'manage_documents': 'Dokumente Verwalten',
    'setup_openai': 'OpenAI Einrichten',
    'ai_configured': 'KI Konfiguriert',
    'recent_chats': 'Letzte Chats',
    'settings': 'Einstellungen',
    'no_chat_history': 'Noch kein Chat-Verlauf',
    'start_conversation': 'Neue Unterhaltung beginnen',
    
    // Chat Input
    'configure_openai_first': 'Konfigurieren Sie zuerst OpenAI, um KI-Antworten zu aktivieren...',
    'upload_documents_first': 'Laden Sie Dokumente hoch und fragen Sie dann nach Unternehmensrichtlinien...',
    'ask_about_policies': 'Fragen Sie nach Ihren Unternehmensrichtlinien, Vorteilen, Verfahren...',
    'configure_ai': 'KI Konfigurieren',
    'upload_docs': 'Docs Hochladen',
    'ai_ready_status': 'KI Bereit',
    'ai_will_search': 'Die KI durchsucht Ihre Dokumente und liefert intelligente Antworten',
    'setup_required': 'Einrichtung Erforderlich',
    'ready': 'Bereit',
    
    // Welcome Message
    'welcome_message': "üëã Willkommen! Ich bin Ihr KI-gest√ºtzter Unternehmensrichtlinien-Assistent. Ich kann Ihre hochgeladenen Dokumente analysieren und intelligente, kontextuelle Antworten zu HR-Richtlinien, Vorteilen, Verfahren und mehr liefern. Laden Sie Ihre Unternehmensdokumente hoch und konfigurieren Sie OpenAI, um zu beginnen!",
    
    // Quick Actions
    'welcome_title': 'Willkommen beim Richtlinien-Assistenten',
    'welcome_subtitle': 'Erhalten Sie sofortige Antworten auf Ihre Fragen zu Unternehmensrichtlinien',
    'hr_policies': 'HR-Richtlinien',
    'leave_policy': 'Urlaubsrichtlinie',
    'code_of_conduct': 'Verhaltenskodex',
    'it_security': 'IT-Sicherheit',
    'benefits': 'Vorteile',
    'working_hours': 'Arbeitszeiten'
  },
  
  zh: {
    // Header
    'ai_policy_assistant': 'AIÊîøÁ≠ñÂä©Êâã',
    'company_policy_assistant': 'AIÈ©±Âä®ÁöÑÂÖ¨Âè∏ÊîøÁ≠ñÂä©Êâã',
    'ai_ready': 'AIÂ∞±Áª™',
    'configure_openai': 'ÈÖçÁΩÆOpenAI',
    'documents_loaded': 'ÊñáÊ°£Â∑≤Âä†ËΩΩ',
    'upload_documents': '‰∏ä‰º†ÊñáÊ°£',
    'hr_system': '‰∫∫ÂäõËµÑÊ∫êÁ≥ªÁªü',
    'online': 'Âú®Á∫ø',
    
    // Sidebar
    'new_chat': 'Êñ∞ËÅäÂ§©',
    'manage_documents': 'ÁÆ°ÁêÜÊñáÊ°£',
    'setup_openai': 'ËÆæÁΩÆOpenAI',
    'ai_configured': 'AIÂ∑≤ÈÖçÁΩÆ',
    'recent_chats': 'ÊúÄËøëËÅäÂ§©',
    'settings': 'ËÆæÁΩÆ',
    'no_chat_history': 'ÊöÇÊó†ËÅäÂ§©ËÆ∞ÂΩï',
    'start_conversation': 'ÂºÄÂßãÊñ∞ÂØπËØù',
    
    // Chat Input
    'configure_openai_first': 'ËØ∑ÂÖàÈÖçÁΩÆOpenAI‰ª•ÂêØÁî®AIÂìçÂ∫î...',
    'upload_documents_first': '‰∏ä‰º†ÊñáÊ°£ÔºåÁÑ∂ÂêéËØ¢ÈóÆÂÖ¨Âè∏ÊîøÁ≠ñ...',
    'ask_about_policies': 'ËØ¢ÈóÆÊÇ®ÁöÑÂÖ¨Âè∏ÊîøÁ≠ñ„ÄÅÁ¶èÂà©„ÄÅÁ®ãÂ∫è...',
    'configure_ai': 'ÈÖçÁΩÆAI',
    'upload_docs': '‰∏ä‰º†ÊñáÊ°£',
    'ai_ready_status': 'AIÂ∞±Áª™',
    'ai_will_search': 'AIÂ∞ÜÊêúÁ¥¢ÊÇ®ÁöÑÊñáÊ°£Âπ∂Êèê‰æõÊô∫ËÉΩÁ≠îÊ°à',
    'setup_required': 'ÈúÄË¶ÅËÆæÁΩÆ',
    'ready': 'Â∞±Áª™',
    
    // Welcome Message
    'welcome_message': "üëã Ê¨¢ËøéÔºÅÊàëÊòØÊÇ®ÁöÑAIÈ©±Âä®ÁöÑÂÖ¨Âè∏ÊîøÁ≠ñÂä©Êâã„ÄÇÊàëÂèØ‰ª•ÂàÜÊûêÊÇ®‰∏ä‰º†ÁöÑÊñáÊ°£ÔºåÂπ∂Êèê‰æõÂÖ≥‰∫é‰∫∫ÂäõËµÑÊ∫êÊîøÁ≠ñ„ÄÅÁ¶èÂà©„ÄÅÁ®ãÂ∫èÁ≠âÁöÑÊô∫ËÉΩ„ÄÅ‰∏ä‰∏ãÊñáÁõ∏ÂÖ≥ÁöÑÁ≠îÊ°à„ÄÇ‰∏ä‰º†ÊÇ®ÁöÑÂÖ¨Âè∏ÊñáÊ°£Âπ∂ÈÖçÁΩÆOpenAIÂç≥ÂèØÂºÄÂßãÔºÅ",
    
    // Quick Actions
    'welcome_title': 'Ê¨¢Ëøé‰ΩøÁî®ÊîøÁ≠ñÂä©Êâã',
    'welcome_subtitle': 'Ëé∑ÂæóÂÖ¨Âè∏ÊîøÁ≠ñÈóÆÈ¢òÁöÑÂç≥Êó∂Á≠îÊ°à',
    'hr_policies': '‰∫∫ÂäõËµÑÊ∫êÊîøÁ≠ñ',
    'leave_policy': 'ËØ∑ÂÅáÊîøÁ≠ñ',
    'code_of_conduct': 'Ë°å‰∏∫ÂáÜÂàô',
    'it_security': 'ITÂÆâÂÖ®',
    'benefits': 'Á¶èÂà©',
    'working_hours': 'Â∑•‰ΩúÊó∂Èó¥'
  }
};